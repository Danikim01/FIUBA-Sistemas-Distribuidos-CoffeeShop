{
  "common_environment": {
    "RABBITMQ_HOST": "rabbitmq",
    "RABBITMQ_PORT": 5672,
    "prefetch_count": 20
  },
  "service_environment": {
    "gateway": {
      "OUTPUT_QUEUE": "transactions_raw",
      "RESULTS_QUEUE": "gateway_results",
      "STORES_EXCHANGE": "stores_raw",
      "USERS_QUEUE": "users_raw",
      "TRANSACTION_ITEMS_QUEUE": "transaction_items_raw",
      "MENU_ITEMS_QUEUE": "menu_items_raw",
      "CHUNK_SIZE": 5000
    },
    "client": {
      "count": 2,
      "GATEWAY_HOST": "gateway",
      "GATEWAY_PORT": "12345",
      "BATCH_MAX_SIZE_KB": "64",
      "LOG_LEVEL": "INFO",
      "DATA_DIR": ".data"
    }
  },
  "workers": {
    "year_filter": {
      "count": 2,
      "environment": {
        "INPUT_QUEUE": "transactions_raw",
        "OUTPUT_EXCHANGE": "transactions_year_filtered"
      }
    },
    "items_year_filter": {
      "count": 2,
      "environment": {
        "INPUT_QUEUE": "transactions_items_raw",
        "OUTPUT_QUEUE": "transaction_items_year_filtered"
      }
    },
    "time_filter": {
      "count": 2,
      "environment": {
        "INPUT_EXCHANGE": "transactions_year_filtered",
        "OUTPUT_EXCHANGE": "transactions_time_filtered"
      }
    },
    "amount_filter": {
      "count": 2,
      "environment": {
        "INPUT_EXCHANGE": "transactions_time_filtered",
        "OUTPUT_QUEUE": "gateway_results"
      }
    },
    "tpv": {
      "count": 1,
      "environment": {
        "INPUT_QUEUE": "transaction_time_filtered",
        "OUTPUT_QUEUE": "tpv_partial"
      }
    },
    "tpv_aggregator": {
      "count": 1,
      "environment": {
        "INPUT_QUEUE": "tpv_partial",
        "OUTPUT_QUEUE": "gateway_results"
      }
    },
    "items_top": {
      "count": 1,
      "environment": {
        "INPUT_QUEUE": "transaction_items_raw",
        "OUTPUT_QUEUE": "top_items_partial"
      }
    },
    "items_aggregator": {
      "count": 1,
      "environment": {
        "INPUT_QUEUE": "top_items_partial",
        "OUTPUT_QUEUE": "gateway_results"
      }
    },
    "top_clients": {
      "count": 1,
      "environment": {
        "INPUT_EXCHANGE": "transactions_year_filtered",
        "OUTPUT_QUEUE": "top_clients_partial"
      }
    },
    "top_clients_birthdays": {
      "count": 1,
      "environment": {
        "INPUT_QUEUE": "top_clients_partial",
        "OUTPUT_QUEUE": "gateway_results"
      }
    }
  }
}
